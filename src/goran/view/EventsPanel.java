/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package goran.view;

import com.github.lgooddatepicker.components.DatePicker;
import goran.util.StringUtil;
import goran.controller.GoogleMapsController;
import goran.controller.HibernateController;
import goran.model.Event;
import goran.model.Location;
import goran.model.Ticket;
import java.text.SimpleDateFormat;
import java.time.LocalDate;
import java.time.ZoneId;
import java.util.Date;
import java.util.Locale;
import javax.swing.DefaultListModel;
import org.netbeans.lib.awtextra.AbsoluteConstraints;

/**
 *
 * @author Goran
 */
public class EventsPanel extends javax.swing.JPanel {

    private Event event;
    private Ticket ticket;
    private Location location;
    private HibernateController<Ticket> ctrlTicket;
    private HibernateController<Event> ctrlEvent;
    private HibernateController<Location> ctrlLocation;
    private GoogleMapsController ctrlMap;
    private DatePicker startDatePicker, endDatePicker;
    private SimpleDateFormat sdf;

    public EventsPanel() {

        initComponents();
        initDateComponents();
        event = new Event();
        location = new Location();
        ticket = new Ticket();
        ctrlEvent = new HibernateController<>();
        ctrlTicket = new HibernateController<>();
        ctrlLocation = new HibernateController<>();
        ctrlMap = new GoogleMapsController();
        
        updateEvents();
    }

    private void updateEvents() {

        DefaultListModel<Event> model = new DefaultListModel<>();
        lstEvents.setModel(model);
        for (Event event : ctrlEvent.getOrderedList(event, "name")) {
            model.addElement(event);
        }
    }

    private void updateEventTickets() {

        try {
            DefaultListModel<Ticket> model = new DefaultListModel<>();
            lstTickets.setModel(model);
            for (Ticket ticket : event.getTickets()) {
                if (ticket.isDeleted()) {
                    continue;
                }
                model.addElement(ticket);
            }
        } catch (Exception e) {
        }
    }

    private void updateLocations() {

        DefaultListModel<Location> model = new DefaultListModel<>();
        lstLocations.setModel(model);
        for (Location location : ctrlLocation.getOrderedList(location, "name")) {
            model.addElement(location);
        }
    }

    /**
     * This method is called from within the constructor to initialize the form. WARNING: Do NOT modify this code. The content of this method is always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        frameEventsUtil = new javax.swing.JFrame();
        pnlEventsUtilMain = new javax.swing.JPanel();
        btnConfirmEvent = new javax.swing.JButton();
        btnCancelEvent = new javax.swing.JButton();
        txtEventName = new javax.swing.JTextField();
        lblErrorEvent = new javax.swing.JLabel();
        jLabel14 = new javax.swing.JLabel();
        pnlEventsUtilTitle = new MotionPanel(frameEventsUtil);
        lblEventsUtil = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        frameTicketsUtil = new javax.swing.JFrame();
        pnlTicketsUtilMain = new javax.swing.JPanel();
        btnConfirmTicket = new javax.swing.JButton();
        btnCancelTicket = new javax.swing.JButton();
        txtTicketName = new javax.swing.JTextField();
        jLabel15 = new javax.swing.JLabel();
        txtTicketPrice = new javax.swing.JTextField();
        jLabel16 = new javax.swing.JLabel();
        jLabel17 = new javax.swing.JLabel();
        txtTicketQuantity = new javax.swing.JTextField();
        lblErrorTicket = new javax.swing.JLabel();
        pnlTicketsUtilTitle = new MotionPanel(frameTicketsUtil);
        lblTicketsUtil = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        frameLocationsUtil = new javax.swing.JFrame();
        pnlLocationsUtilMain = new javax.swing.JPanel();
        btnConfirmLocation = new javax.swing.JButton();
        btnCancelLocation = new javax.swing.JButton();
        txtFindLocation = new javax.swing.JTextField();
        lblErrorLocation = new javax.swing.JLabel();
        jScrollPane3 = new javax.swing.JScrollPane();
        lstLocations = new javax.swing.JList<>();
        btnFindLocation = new javax.swing.JButton();
        pnlLocationsUtilTitle = new MotionPanel(frameLocationsUtil);
        lblLocations = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        frameDateUtil = new javax.swing.JFrame();
        pnlDateTimeUtil = new javax.swing.JPanel();
        btnConfirmDateTime = new javax.swing.JButton();
        btnCancelDateTime = new javax.swing.JButton();
        lblDateTimeUtil1 = new javax.swing.JLabel();
        lblDateTimeUtil2 = new javax.swing.JLabel();
        pnlDateTimeUtilTitle = new MotionPanel(frameDateUtil);
        lblDateTimeUtil = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        lstTickets = new javax.swing.JList<>();
        btnEditEvent = new javax.swing.JButton();
        btnRemoveEvent = new javax.swing.JButton();
        jScrollPane2 = new javax.swing.JScrollPane();
        lstEvents = new javax.swing.JList<>();
        btnAddEvent = new javax.swing.JButton();
        btnAddLocation = new javax.swing.JButton();
        btnAddTicketToEvent = new javax.swing.JButton();
        btnAddTime = new javax.swing.JButton();
        lblDateTime = new javax.swing.JLabel();
        btnRemoveTicket = new javax.swing.JButton();
        btnEditTicket = new javax.swing.JButton();
        lblEventLocation = new javax.swing.JLabel();
        lblTitle5 = new javax.swing.JLabel();
        lblTitle6 = new javax.swing.JLabel();
        lblMap = new javax.swing.JLabel();
        lblTitle7 = new javax.swing.JLabel();
        txtFindEvent = new javax.swing.JTextField();
        btnFindEvent = new javax.swing.JButton();

        frameEventsUtil.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        frameEventsUtil.setAlwaysOnTop(true);
        frameEventsUtil.setUndecorated(true);
        frameEventsUtil.setResizable(false);
        frameEventsUtil.setSize(new java.awt.Dimension(400, 150));
        frameEventsUtil.getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        pnlEventsUtilMain.setBackground(new java.awt.Color(60, 60, 70));
        pnlEventsUtilMain.setPreferredSize(new java.awt.Dimension(550, 150));
        pnlEventsUtilMain.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnConfirmEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnConfirmEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnConfirmEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnConfirmEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_confirm.png"))); // NOI18N
        btnConfirmEvent.setText("POTVRDI");
        btnConfirmEvent.setBorder(null);
        btnConfirmEvent.setFocusPainted(false);
        btnConfirmEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnConfirmEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmEventActionPerformed(evt);
            }
        });
        pnlEventsUtilMain.add(btnConfirmEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 60, 100, 40));

        btnCancelEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnCancelEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnCancelEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_cancel.png"))); // NOI18N
        btnCancelEvent.setText("NAZAD");
        btnCancelEvent.setBorder(null);
        btnCancelEvent.setFocusPainted(false);
        btnCancelEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnCancelEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelEventActionPerformed(evt);
            }
        });
        pnlEventsUtilMain.add(btnCancelEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 60, 100, 40));

        txtEventName.setBackground(new java.awt.Color(153, 153, 153));
        txtEventName.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtEventName.setForeground(new java.awt.Color(255, 255, 255));
        txtEventName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmEventActionPerformed(evt);
            }
        });
        pnlEventsUtilMain.add(txtEventName, new org.netbeans.lib.awtextra.AbsoluteConstraints(140, 10, 250, 40));

        lblErrorEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblErrorEvent.setForeground(new java.awt.Color(255, 0, 0));
        pnlEventsUtilMain.add(lblErrorEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 60, 160, 40));

        jLabel14.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        jLabel14.setForeground(new java.awt.Color(255, 255, 255));
        jLabel14.setText("NAZIV EVENTA");
        pnlEventsUtilMain.add(jLabel14, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 120, 40));

        frameEventsUtil.getContentPane().add(pnlEventsUtilMain, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 40, 400, 110));

        pnlEventsUtilTitle.setBackground(new java.awt.Color(30, 30, 40));
        pnlEventsUtilTitle.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblEventsUtil.setFont(new java.awt.Font("Lucida Sans", 1, 16)); // NOI18N
        lblEventsUtil.setForeground(new java.awt.Color(255, 255, 255));
        lblEventsUtil.setText("DODAJ NOVI EVENT");
        pnlEventsUtilTitle.add(lblEventsUtil, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 0, 230, 40));

        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel3.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/title_add_event.png"))); // NOI18N
        jLabel3.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        pnlEventsUtilTitle.add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 30, 40));

        frameEventsUtil.getContentPane().add(pnlEventsUtilTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 400, 40));

        frameTicketsUtil.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        frameTicketsUtil.setAlwaysOnTop(true);
        frameTicketsUtil.setUndecorated(true);
        frameTicketsUtil.setResizable(false);
        frameTicketsUtil.setSize(new java.awt.Dimension(400, 250));
        frameTicketsUtil.getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        pnlTicketsUtilMain.setBackground(new java.awt.Color(60, 60, 70));
        pnlTicketsUtilMain.setPreferredSize(new java.awt.Dimension(550, 300));
        pnlTicketsUtilMain.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnConfirmTicket.setBackground(new java.awt.Color(0, 0, 0));
        btnConfirmTicket.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnConfirmTicket.setForeground(new java.awt.Color(255, 255, 255));
        btnConfirmTicket.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_confirm.png"))); // NOI18N
        btnConfirmTicket.setText("POTVRDI");
        btnConfirmTicket.setBorder(null);
        btnConfirmTicket.setFocusPainted(false);
        btnConfirmTicket.setPreferredSize(new java.awt.Dimension(80, 80));
        btnConfirmTicket.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmTicketActionPerformed(evt);
            }
        });
        pnlTicketsUtilMain.add(btnConfirmTicket, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 160, 100, 40));

        btnCancelTicket.setBackground(new java.awt.Color(0, 0, 0));
        btnCancelTicket.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnCancelTicket.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelTicket.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_cancel.png"))); // NOI18N
        btnCancelTicket.setText("NAZAD");
        btnCancelTicket.setBorder(null);
        btnCancelTicket.setFocusPainted(false);
        btnCancelTicket.setPreferredSize(new java.awt.Dimension(80, 80));
        btnCancelTicket.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelTicketActionPerformed(evt);
            }
        });
        pnlTicketsUtilMain.add(btnCancelTicket, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 160, 100, 40));

        txtTicketName.setBackground(new java.awt.Color(153, 153, 153));
        txtTicketName.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtTicketName.setForeground(new java.awt.Color(255, 255, 255));
        txtTicketName.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmTicketActionPerformed(evt);
            }
        });
        pnlTicketsUtilMain.add(txtTicketName, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 10, 290, 40));

        jLabel15.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        jLabel15.setForeground(new java.awt.Color(255, 255, 255));
        jLabel15.setText("NAZIV");
        pnlTicketsUtilMain.add(jLabel15, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 90, 40));

        txtTicketPrice.setBackground(new java.awt.Color(153, 153, 153));
        txtTicketPrice.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtTicketPrice.setForeground(new java.awt.Color(255, 255, 255));
        txtTicketPrice.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmTicketActionPerformed(evt);
            }
        });
        pnlTicketsUtilMain.add(txtTicketPrice, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 60, 290, 40));

        jLabel16.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        jLabel16.setForeground(new java.awt.Color(255, 255, 255));
        jLabel16.setText("CIJENA");
        pnlTicketsUtilMain.add(jLabel16, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 60, 90, 40));

        jLabel17.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        jLabel17.setForeground(new java.awt.Color(255, 255, 255));
        jLabel17.setText("KOLIČINA");
        pnlTicketsUtilMain.add(jLabel17, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 110, 90, 40));

        txtTicketQuantity.setBackground(new java.awt.Color(153, 153, 153));
        txtTicketQuantity.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtTicketQuantity.setForeground(new java.awt.Color(255, 255, 255));
        txtTicketQuantity.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmTicketActionPerformed(evt);
            }
        });
        pnlTicketsUtilMain.add(txtTicketQuantity, new org.netbeans.lib.awtextra.AbsoluteConstraints(100, 110, 290, 40));

        lblErrorTicket.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblErrorTicket.setForeground(new java.awt.Color(255, 0, 0));
        pnlTicketsUtilMain.add(lblErrorTicket, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 160, 170, 40));

        frameTicketsUtil.getContentPane().add(pnlTicketsUtilMain, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 40, 400, 210));

        pnlTicketsUtilTitle.setBackground(new java.awt.Color(30, 30, 40));
        pnlTicketsUtilTitle.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblTicketsUtil.setFont(new java.awt.Font("Lucida Sans", 1, 16)); // NOI18N
        lblTicketsUtil.setForeground(new java.awt.Color(255, 255, 255));
        lblTicketsUtil.setText("DODAJ NOVU ULAZNICU");
        pnlTicketsUtilTitle.add(lblTicketsUtil, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 0, 230, 40));

        jLabel4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/title_add_ticket.png"))); // NOI18N
        pnlTicketsUtilTitle.add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 30, 40));

        frameTicketsUtil.getContentPane().add(pnlTicketsUtilTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 400, 40));

        frameLocationsUtil.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        frameLocationsUtil.setAlwaysOnTop(true);
        frameLocationsUtil.setUndecorated(true);
        frameLocationsUtil.setResizable(false);
        frameLocationsUtil.setSize(new java.awt.Dimension(400, 420));
        frameLocationsUtil.getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        pnlLocationsUtilMain.setBackground(new java.awt.Color(60, 60, 70));
        pnlLocationsUtilMain.setPreferredSize(new java.awt.Dimension(400, 380));
        pnlLocationsUtilMain.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnConfirmLocation.setBackground(new java.awt.Color(0, 0, 0));
        btnConfirmLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnConfirmLocation.setForeground(new java.awt.Color(255, 255, 255));
        btnConfirmLocation.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_confirm.png"))); // NOI18N
        btnConfirmLocation.setText("POTVRDI");
        btnConfirmLocation.setBorder(null);
        btnConfirmLocation.setFocusPainted(false);
        btnConfirmLocation.setPreferredSize(new java.awt.Dimension(80, 80));
        btnConfirmLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmLocationActionPerformed(evt);
            }
        });
        pnlLocationsUtilMain.add(btnConfirmLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(180, 330, 100, 40));

        btnCancelLocation.setBackground(new java.awt.Color(0, 0, 0));
        btnCancelLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnCancelLocation.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelLocation.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_cancel.png"))); // NOI18N
        btnCancelLocation.setText("NAZAD");
        btnCancelLocation.setBorder(null);
        btnCancelLocation.setFocusPainted(false);
        btnCancelLocation.setPreferredSize(new java.awt.Dimension(80, 80));
        btnCancelLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelLocationActionPerformed(evt);
            }
        });
        pnlLocationsUtilMain.add(btnCancelLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(290, 330, 100, 40));

        txtFindLocation.setBackground(new java.awt.Color(153, 153, 153));
        txtFindLocation.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtFindLocation.setForeground(new java.awt.Color(255, 255, 255));
        txtFindLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFindLocationActionPerformed(evt);
            }
        });
        pnlLocationsUtilMain.add(txtFindLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 10, 320, 40));

        lblErrorLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblErrorLocation.setForeground(new java.awt.Color(255, 0, 0));
        pnlLocationsUtilMain.add(lblErrorLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 330, 170, 40));

        lstLocations.setBackground(new java.awt.Color(153, 153, 153));
        lstLocations.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lstLocations.setForeground(new java.awt.Color(255, 255, 255));
        jScrollPane3.setViewportView(lstLocations);

        pnlLocationsUtilMain.add(jScrollPane3, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 60, 380, 260));

        btnFindLocation.setBackground(new java.awt.Color(0, 0, 0));
        btnFindLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnFindLocation.setForeground(new java.awt.Color(255, 255, 255));
        btnFindLocation.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_search.png"))); // NOI18N
        btnFindLocation.setBorder(null);
        btnFindLocation.setFocusPainted(false);
        btnFindLocation.setPreferredSize(new java.awt.Dimension(80, 80));
        btnFindLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFindLocationActionPerformed(evt);
            }
        });
        pnlLocationsUtilMain.add(btnFindLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 10, 50, 40));

        frameLocationsUtil.getContentPane().add(pnlLocationsUtilMain, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 40, 400, 380));

        pnlLocationsUtilTitle.setBackground(new java.awt.Color(30, 30, 40));
        pnlLocationsUtilTitle.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblLocations.setFont(new java.awt.Font("Lucida Sans", 1, 16)); // NOI18N
        lblLocations.setForeground(new java.awt.Color(255, 255, 255));
        lblLocations.setText("ODABERI LOKACIJU");
        pnlLocationsUtilTitle.add(lblLocations, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 0, 230, 40));

        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel2.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/title_add_location.png"))); // NOI18N
        pnlLocationsUtilTitle.add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 30, 40));

        frameLocationsUtil.getContentPane().add(pnlLocationsUtilTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 420, 40));

        frameDateUtil.setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
        frameDateUtil.setAlwaysOnTop(true);
        frameDateUtil.setUndecorated(true);
        frameDateUtil.setResizable(false);
        frameDateUtil.setSize(new java.awt.Dimension(230, 230));
        frameDateUtil.getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        pnlDateTimeUtil.setBackground(new java.awt.Color(60, 60, 70));
        pnlDateTimeUtil.setPreferredSize(new java.awt.Dimension(290, 200));
        pnlDateTimeUtil.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        btnConfirmDateTime.setBackground(new java.awt.Color(0, 0, 0));
        btnConfirmDateTime.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnConfirmDateTime.setForeground(new java.awt.Color(255, 255, 255));
        btnConfirmDateTime.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_confirm.png"))); // NOI18N
        btnConfirmDateTime.setText("POTVRDI");
        btnConfirmDateTime.setBorder(null);
        btnConfirmDateTime.setFocusPainted(false);
        btnConfirmDateTime.setPreferredSize(new java.awt.Dimension(80, 80));
        btnConfirmDateTime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmDateTimeActionPerformed(evt);
            }
        });
        pnlDateTimeUtil.add(btnConfirmDateTime, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 140, 100, 40));

        btnCancelDateTime.setBackground(new java.awt.Color(0, 0, 0));
        btnCancelDateTime.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnCancelDateTime.setForeground(new java.awt.Color(255, 255, 255));
        btnCancelDateTime.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_cancel.png"))); // NOI18N
        btnCancelDateTime.setText("NAZAD");
        btnCancelDateTime.setBorder(null);
        btnCancelDateTime.setFocusPainted(false);
        btnCancelDateTime.setPreferredSize(new java.awt.Dimension(80, 80));
        btnCancelDateTime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelDateTimeActionPerformed(evt);
            }
        });
        pnlDateTimeUtil.add(btnCancelDateTime, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 140, 100, 40));

        lblDateTimeUtil1.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblDateTimeUtil1.setForeground(new java.awt.Color(255, 255, 255));
        lblDateTimeUtil1.setText("ZAVRŠETAK");
        pnlDateTimeUtil.add(lblDateTimeUtil1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 70, 120, 30));

        lblDateTimeUtil2.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblDateTimeUtil2.setForeground(new java.awt.Color(255, 255, 255));
        lblDateTimeUtil2.setText("POČETAK");
        pnlDateTimeUtil.add(lblDateTimeUtil2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 0, 120, 30));

        frameDateUtil.getContentPane().add(pnlDateTimeUtil, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 40, 230, 190));

        pnlDateTimeUtilTitle.setBackground(new java.awt.Color(30, 30, 40));
        pnlDateTimeUtilTitle.setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lblDateTimeUtil.setFont(new java.awt.Font("Lucida Sans", 1, 16)); // NOI18N
        lblDateTimeUtil.setForeground(new java.awt.Color(255, 255, 255));
        lblDateTimeUtil.setText("DODAJ DATUM EVENTA");
        pnlDateTimeUtilTitle.add(lblDateTimeUtil, new org.netbeans.lib.awtextra.AbsoluteConstraints(30, 0, 200, 40));

        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_calendar.png"))); // NOI18N
        jLabel5.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        pnlDateTimeUtilTitle.add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, 30, 40));

        frameDateUtil.getContentPane().add(pnlDateTimeUtilTitle, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, 0, -1, 40));

        setBackground(new java.awt.Color(60, 60, 70));
        setMinimumSize(new java.awt.Dimension(700, 500));
        setPreferredSize(new java.awt.Dimension(700, 500));
        setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());

        lstTickets.setBackground(new java.awt.Color(120, 120, 120));
        lstTickets.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lstTickets.setForeground(new java.awt.Color(255, 255, 255));
        jScrollPane1.setViewportView(lstTickets);

        add(jScrollPane1, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 340, 320, 100));

        btnEditEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnEditEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnEditEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnEditEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_edit.png"))); // NOI18N
        btnEditEvent.setText("UREDI");
        btnEditEvent.setBorder(null);
        btnEditEvent.setFocusPainted(false);
        btnEditEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnEditEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEditEventActionPerformed(evt);
            }
        });
        add(btnEditEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 270, 100, 40));

        btnRemoveEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnRemoveEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnRemoveEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnRemoveEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_remove.png"))); // NOI18N
        btnRemoveEvent.setText("UKLONI");
        btnRemoveEvent.setBorder(null);
        btnRemoveEvent.setFocusPainted(false);
        btnRemoveEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnRemoveEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRemoveEventActionPerformed(evt);
            }
        });
        add(btnRemoveEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 270, 100, 40));

        lstEvents.setBackground(new java.awt.Color(120, 120, 120));
        lstEvents.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lstEvents.setForeground(new java.awt.Color(255, 255, 255));
        lstEvents.addListSelectionListener(new javax.swing.event.ListSelectionListener() {
            public void valueChanged(javax.swing.event.ListSelectionEvent evt) {
                lstEventsValueChanged(evt);
            }
        });
        jScrollPane2.setViewportView(lstEvents);

        add(jScrollPane2, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 80, 320, 180));

        btnAddEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnAddEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnAddEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnAddEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_add.png"))); // NOI18N
        btnAddEvent.setText("DODAJ");
        btnAddEvent.setBorder(null);
        btnAddEvent.setFocusPainted(false);
        btnAddEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnAddEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddEventActionPerformed(evt);
            }
        });
        add(btnAddEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 270, 100, 40));

        btnAddLocation.setBackground(new java.awt.Color(0, 0, 0));
        btnAddLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnAddLocation.setForeground(new java.awt.Color(255, 255, 255));
        btnAddLocation.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_location.png"))); // NOI18N
        btnAddLocation.setBorder(null);
        btnAddLocation.setFocusPainted(false);
        btnAddLocation.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnAddLocation.setPreferredSize(new java.awt.Dimension(80, 80));
        btnAddLocation.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btnAddLocation.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddLocationActionPerformed(evt);
            }
        });
        add(btnAddLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 80, 50, 40));

        btnAddTicketToEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnAddTicketToEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnAddTicketToEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnAddTicketToEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_add.png"))); // NOI18N
        btnAddTicketToEvent.setText("DODAJ");
        btnAddTicketToEvent.setBorder(null);
        btnAddTicketToEvent.setFocusPainted(false);
        btnAddTicketToEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnAddTicketToEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddTicketToEventActionPerformed(evt);
            }
        });
        add(btnAddTicketToEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 450, 100, 40));

        btnAddTime.setBackground(new java.awt.Color(0, 0, 0));
        btnAddTime.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnAddTime.setForeground(new java.awt.Color(255, 255, 255));
        btnAddTime.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_calendar.png"))); // NOI18N
        btnAddTime.setBorder(null);
        btnAddTime.setFocusPainted(false);
        btnAddTime.setHorizontalTextPosition(javax.swing.SwingConstants.CENTER);
        btnAddTime.setPreferredSize(new java.awt.Dimension(80, 80));
        btnAddTime.setVerticalTextPosition(javax.swing.SwingConstants.BOTTOM);
        btnAddTime.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnAddTimeActionPerformed(evt);
            }
        });
        add(btnAddTime, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 30, 50, 40));

        lblDateTime.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblDateTime.setForeground(new java.awt.Color(255, 255, 255));
        lblDateTime.setText("DODAJ DATUM I VRIJEME");
        add(lblDateTime, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 30, 290, 40));

        btnRemoveTicket.setBackground(new java.awt.Color(0, 0, 0));
        btnRemoveTicket.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnRemoveTicket.setForeground(new java.awt.Color(255, 255, 255));
        btnRemoveTicket.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_remove.png"))); // NOI18N
        btnRemoveTicket.setText("UKLONI");
        btnRemoveTicket.setBorder(null);
        btnRemoveTicket.setFocusPainted(false);
        btnRemoveTicket.setPreferredSize(new java.awt.Dimension(80, 80));
        btnRemoveTicket.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnRemoveTicketActionPerformed(evt);
            }
        });
        add(btnRemoveTicket, new org.netbeans.lib.awtextra.AbsoluteConstraints(120, 450, 100, 40));

        btnEditTicket.setBackground(new java.awt.Color(0, 0, 0));
        btnEditTicket.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnEditTicket.setForeground(new java.awt.Color(255, 255, 255));
        btnEditTicket.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_edit.png"))); // NOI18N
        btnEditTicket.setText("UREDI");
        btnEditTicket.setBorder(null);
        btnEditTicket.setFocusPainted(false);
        btnEditTicket.setPreferredSize(new java.awt.Dimension(80, 80));
        btnEditTicket.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEditTicketActionPerformed(evt);
            }
        });
        add(btnEditTicket, new org.netbeans.lib.awtextra.AbsoluteConstraints(230, 450, 100, 40));

        lblEventLocation.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblEventLocation.setForeground(new java.awt.Color(255, 255, 255));
        lblEventLocation.setText("DODAJ LOKACIJU EVENTA");
        add(lblEventLocation, new org.netbeans.lib.awtextra.AbsoluteConstraints(400, 80, 290, 40));

        lblTitle5.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblTitle5.setForeground(new java.awt.Color(255, 255, 255));
        lblTitle5.setText("ULAZNICE");
        add(lblTitle5, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 310, 250, 30));

        lblTitle6.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblTitle6.setForeground(new java.awt.Color(255, 255, 255));
        lblTitle6.setText("OPŠIRNIJE");
        add(lblTitle6, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 0, 220, 30));

        lblMap.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        add(lblMap, new org.netbeans.lib.awtextra.AbsoluteConstraints(340, 130, 350, 360));

        lblTitle7.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        lblTitle7.setForeground(new java.awt.Color(255, 255, 255));
        lblTitle7.setText("EVENTI");
        add(lblTitle7, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 0, 220, 30));

        txtFindEvent.setBackground(new java.awt.Color(120, 120, 120));
        txtFindEvent.setFont(new java.awt.Font("Lucida Sans", 0, 16)); // NOI18N
        txtFindEvent.setForeground(new java.awt.Color(255, 255, 255));
        txtFindEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFindEventActionPerformed(evt);
            }
        });
        add(txtFindEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(10, 30, 260, 40));

        btnFindEvent.setBackground(new java.awt.Color(0, 0, 0));
        btnFindEvent.setFont(new java.awt.Font("Lucida Sans", 1, 14)); // NOI18N
        btnFindEvent.setForeground(new java.awt.Color(255, 255, 255));
        btnFindEvent.setIcon(new javax.swing.ImageIcon(getClass().getResource("/goran/resources/icons/btn_search.png"))); // NOI18N
        btnFindEvent.setBorder(null);
        btnFindEvent.setFocusPainted(false);
        btnFindEvent.setPreferredSize(new java.awt.Dimension(80, 80));
        btnFindEvent.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnFindEventActionPerformed(evt);
            }
        });
        add(btnFindEvent, new org.netbeans.lib.awtextra.AbsoluteConstraints(280, 30, 50, 40));
    }// </editor-fold>//GEN-END:initComponents

    private void btnEditEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditEventActionPerformed

        if (lstEvents.getSelectedIndex() == -1) {

        } else {

            lblEventsUtil.setText(StringUtil.EDIT_EVENT);
            txtEventName.setText(event.getName());
            frameEventsUtil.setVisible(true);
            frameEventsUtil.setLocationRelativeTo(this);
        }
    }//GEN-LAST:event_btnEditEventActionPerformed

    private void btnRemoveEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRemoveEventActionPerformed

        if (lstEvents.getSelectedIndex() == -1) {

        } else {
            
            for (Ticket t : event.getTickets()) {
                ctrlTicket.delete(t);
            }

            ctrlEvent.delete(event);
            updateEvents();

        }
    }//GEN-LAST:event_btnRemoveEventActionPerformed

    private void btnAddLocationActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddLocationActionPerformed

        if (lstEvents.getSelectedIndex() == -1) {

        } else {

            updateLocations();
            lblErrorLocation.setText("");
            frameLocationsUtil.setVisible(true);
            frameLocationsUtil.setLocationRelativeTo(this);
        }
    }//GEN-LAST:event_btnAddLocationActionPerformed

    private void btnConfirmEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConfirmEventActionPerformed

        if (txtEventName.getText().equals("")) {

            lblErrorEvent.setText(StringUtil.INPUT_ERROR);

        } else {

            event.setName(txtEventName.getText());
            ctrlEvent.save(event);
            updateEvents();
            lblErrorEvent.setText("");
            frameEventsUtil.dispose();
            lstEvents.setSelectedValue(event, true);
        }

    }//GEN-LAST:event_btnConfirmEventActionPerformed

    private void btnCancelEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelEventActionPerformed

        frameEventsUtil.dispose();
        lblErrorLocation.setText("");
    }//GEN-LAST:event_btnCancelEventActionPerformed

    private void lstEventsValueChanged(javax.swing.event.ListSelectionEvent evt) {//GEN-FIRST:event_lstEventsValueChanged

        if (lstEvents.getSelectedIndex() == -1) {

            
            DefaultListModel<Ticket> model = (DefaultListModel <Ticket>) lstTickets.getModel();
            model.removeAllElements();
            lblMap.setIcon(null);
            lblEventLocation.setText(StringUtil.ADD_EVENT_LOCATION);
            lblDateTime.setText(StringUtil.ADD_EVENT_DATE);

        } else {

            event = lstEvents.getSelectedValue();
            updateEventTickets();

            if (event.getLocation() == null) {

                lblMap.setIcon(null);
                lblEventLocation.setText(StringUtil.ADD_EVENT_LOCATION);

            } else {

                lblEventLocation.setText(event.getLocation().toString());
                ctrlMap.downloadMap(event.getLocation().getLat(), event.getLocation().getLng(), 14, lblMap);
            }

            if (event.getStartDate() == null) {
                lblDateTime.setText(StringUtil.ADD_EVENT_DATE);
                startDatePicker.setDate(null);
                endDatePicker.setDate(null);

            } else {

                String date = sdf.format(event.getStartDate());
                startDatePicker.setDate(event.getStartDate().toInstant().atZone(ZoneId.systemDefault()).toLocalDate());

                if (event.getEndDate() != null) {
                    endDatePicker.setDate(event.getEndDate().toInstant().atZone(ZoneId.systemDefault()).toLocalDate());
                    date += " - " + sdf.format(event.getEndDate());
                }

                lblDateTime.setText(date);
            }
        }
    }//GEN-LAST:event_lstEventsValueChanged

    private void btnConfirmTicketActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConfirmTicketActionPerformed

        if (txtTicketName.getText().equals("") || txtTicketPrice.getText().equals("") || txtTicketQuantity.getText().equals("")) {

            lblErrorTicket.setText(StringUtil.INPUT_ERROR);

        } else {

            try {

                ticket.setName(txtTicketName.getText());
                ticket.setPrice(Double.parseDouble(txtTicketPrice.getText()));
                ticket.setQuantity(Integer.parseInt(txtTicketQuantity.getText()));
                ticket.setEvent(lstEvents.getSelectedValue());

                if (lblTicketsUtil.getText().equals(StringUtil.ADD_TICKET)) {
                    event.getTickets().add(ticket);
                }

                ctrlTicket.save(ticket);
                ctrlEvent.save(event);
                updateEventTickets();
                frameTicketsUtil.dispose();

            } catch (NumberFormatException numberFormatException) {
                lblErrorTicket.setText(StringUtil.NUMBER_ERROR);
            }
        }
    }//GEN-LAST:event_btnConfirmTicketActionPerformed

    private void btnCancelTicketActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelTicketActionPerformed

        frameTicketsUtil.dispose();
    }//GEN-LAST:event_btnCancelTicketActionPerformed

    private void btnAddTicketToEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddTicketToEventActionPerformed

        if (lstEvents.getSelectedIndex() == -1) {

        } else {

            ticket = new Ticket();

            lblTicketsUtil.setText(StringUtil.ADD_TICKET);
            lblErrorTicket.setText("");
            txtTicketName.setText(event.getName());
            txtTicketPrice.setText("");
            txtTicketQuantity.setText((""));

            frameTicketsUtil.setVisible(true);
            frameTicketsUtil.setLocationRelativeTo(this);
        }
    }//GEN-LAST:event_btnAddTicketToEventActionPerformed

    private void btnAddEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddEventActionPerformed

        event = new Event();

        lblEventsUtil.setText(StringUtil.ADD_EVENT);
        lblErrorEvent.setText("");
        txtEventName.setText("");

        frameEventsUtil.setVisible(true);
        frameEventsUtil.setLocationRelativeTo(this);
    }//GEN-LAST:event_btnAddEventActionPerformed

    private void btnRemoveTicketActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnRemoveTicketActionPerformed

        if (lstTickets.getSelectedIndex() == -1) {

        } else {

            ticket = lstTickets.getSelectedValue();
            event.getTickets().remove(ticket);
            ctrlTicket.delete(ticket);
            ctrlEvent.save(event);
            updateEventTickets();

        }
    }//GEN-LAST:event_btnRemoveTicketActionPerformed

    private void btnEditTicketActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnEditTicketActionPerformed

        if (lstTickets.getSelectedIndex() == -1) {

        } else {

            ticket = lstTickets.getSelectedValue();
            lblTicketsUtil.setText(StringUtil.EDIT_TICKET);
            txtTicketName.setText(ticket.getName());
            txtTicketPrice.setText(String.valueOf(ticket.getPrice()));
            txtTicketQuantity.setText(String.valueOf(ticket.getQuantity()));

            frameTicketsUtil.setVisible(true);
            frameTicketsUtil.setLocationRelativeTo(this);

        }
    }//GEN-LAST:event_btnEditTicketActionPerformed

    private void btnConfirmLocationActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConfirmLocationActionPerformed

        if (lstLocations.getSelectedIndex() == -1) {
            lblErrorLocation.setText(StringUtil.LOCATION_SELECTION_ERROR);
        } else {

            location = lstLocations.getSelectedValue();

            event.setLocation(location);
            ctrlEvent.save(event);
            ctrlMap.downloadMap(location.getLat(), location.getLng(), 14, lblMap);

            lblEventLocation.setText(location.toString());

            frameLocationsUtil.dispose();

        }
    }//GEN-LAST:event_btnConfirmLocationActionPerformed

    private void btnCancelLocationActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelLocationActionPerformed

        frameLocationsUtil.dispose();
    }//GEN-LAST:event_btnCancelLocationActionPerformed

    private void btnFindLocationActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnFindLocationActionPerformed

        if (txtFindLocation.getText().equals("")) {

            updateLocations();

        } else {

            DefaultListModel<Location> model = new DefaultListModel<>();
            lstLocations.setModel(model);
            for (Location location : ctrlLocation.find(location, "name", txtFindLocation.getText())) {
                model.addElement(location);
            }
        }
    }//GEN-LAST:event_btnFindLocationActionPerformed

    private void btnConfirmDateTimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConfirmDateTimeActionPerformed

        String date = "";
        if (startDatePicker.getDate() != null) {
            event.setStartDate(Date.from(startDatePicker.getDate().atStartOfDay(ZoneId.systemDefault()).toInstant()));
            date = sdf.format(event.getStartDate());
            if (endDatePicker.getDate() != null) {
                event.setEndDate(Date.from(endDatePicker.getDate().atStartOfDay(ZoneId.systemDefault()).toInstant()));
                date += " - " + sdf.format(event.getEndDate());
            }

            lblDateTime.setText(date);
            ctrlEvent.save(event);
            frameDateUtil.dispose();

        }


    }//GEN-LAST:event_btnConfirmDateTimeActionPerformed

    private void btnCancelDateTimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelDateTimeActionPerformed
        frameDateUtil.dispose();
    }//GEN-LAST:event_btnCancelDateTimeActionPerformed

    private void btnAddTimeActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnAddTimeActionPerformed

        frameDateUtil.setVisible(true);
        frameDateUtil.setLocationRelativeTo(this);

    }//GEN-LAST:event_btnAddTimeActionPerformed

    private void btnFindEventActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnFindEventActionPerformed

        if (txtFindEvent.getText().equals("")) {

            updateEvents();

        } else {

            DefaultListModel<Event> model = new DefaultListModel<>();
            lstEvents.setModel(model);
            for (Event event : ctrlEvent.find(event, "name", txtFindEvent.getText())) {
                model.addElement(event);
            }
        }
    }//GEN-LAST:event_btnFindEventActionPerformed

    public void applyTheme() {

        //Events Panel
        setBackground(Theme.color2);
        btnAddEvent.setBackground(Theme.color3);
        btnRemoveEvent.setBackground(Theme.color3);
        btnEditEvent.setBackground(Theme.color3);
        btnAddLocation.setBackground(Theme.color3);
        btnAddTime.setBackground(Theme.color3);
        btnAddTicketToEvent.setBackground(Theme.color3);
        btnRemoveTicket.setBackground(Theme.color3);
        btnEditTicket.setBackground(Theme.color3);
        btnFindEvent.setBackground(Theme.color3);
        lstEvents.setBackground(Theme.color4);
        lstEvents.setForeground(Theme.font1);
        lstTickets.setBackground(Theme.color4);
        lstTickets.setForeground(Theme.font1);
        txtFindEvent.setBackground(Theme.color4);
        txtFindEvent.setForeground(Theme.font1);

        //Events Util
        pnlEventsUtilTitle.setBackground(Theme.color1);
        pnlEventsUtilMain.setBackground(Theme.color2);
        btnConfirmEvent.setBackground(Theme.color3);
        btnCancelEvent.setBackground(Theme.color3);
        txtEventName.setBackground(Theme.color4);
        txtEventName.setForeground(Theme.font1);

        //Locations util
        pnlLocationsUtilTitle.setBackground(Theme.color1);
        pnlLocationsUtilMain.setBackground(Theme.color2);
        btnConfirmLocation.setBackground(Theme.color3);
        btnCancelLocation.setBackground(Theme.color3);
        btnFindLocation.setBackground(Theme.color3);
        lstLocations.setBackground(Theme.color4);
        lstLocations.setForeground(Theme.font1);
        txtFindLocation.setBackground(Theme.color4);
        txtFindLocation.setForeground(Theme.font1);

        //Tickets Util
        pnlTicketsUtilTitle.setBackground(Theme.color1);
        pnlTicketsUtilMain.setBackground(Theme.color2);
        btnConfirmTicket.setBackground(Theme.color3);
        btnCancelTicket.setBackground(Theme.color3);
        txtTicketName.setBackground(Theme.color4);
        txtTicketPrice.setBackground(Theme.color4);
        txtTicketQuantity.setBackground(Theme.color4);
        txtTicketName.setForeground(Theme.font1);
        txtTicketPrice.setForeground(Theme.font1);
        txtTicketQuantity.setForeground(Theme.font1);
        
        //Date Util
        pnlDateTimeUtilTitle.setBackground(Theme.color1);
        pnlDateTimeUtil.setBackground(Theme.color2);
        btnConfirmDateTime.setBackground(Theme.color3);
        btnCancelDateTime.setBackground(Theme.color3);
    }

    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JButton btnAddEvent;
    private javax.swing.JButton btnAddLocation;
    private javax.swing.JButton btnAddTicketToEvent;
    private javax.swing.JButton btnAddTime;
    private javax.swing.JButton btnCancelDateTime;
    private javax.swing.JButton btnCancelEvent;
    private javax.swing.JButton btnCancelLocation;
    private javax.swing.JButton btnCancelTicket;
    private javax.swing.JButton btnConfirmDateTime;
    private javax.swing.JButton btnConfirmEvent;
    private javax.swing.JButton btnConfirmLocation;
    private javax.swing.JButton btnConfirmTicket;
    private javax.swing.JButton btnEditEvent;
    private javax.swing.JButton btnEditTicket;
    private javax.swing.JButton btnFindEvent;
    private javax.swing.JButton btnFindLocation;
    private javax.swing.JButton btnRemoveEvent;
    private javax.swing.JButton btnRemoveTicket;
    private javax.swing.JFrame frameDateUtil;
    private javax.swing.JFrame frameEventsUtil;
    private javax.swing.JFrame frameLocationsUtil;
    private javax.swing.JFrame frameTicketsUtil;
    private javax.swing.JLabel jLabel14;
    private javax.swing.JLabel jLabel15;
    private javax.swing.JLabel jLabel16;
    private javax.swing.JLabel jLabel17;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JScrollPane jScrollPane3;
    private javax.swing.JLabel lblDateTime;
    private javax.swing.JLabel lblDateTimeUtil;
    private javax.swing.JLabel lblDateTimeUtil1;
    private javax.swing.JLabel lblDateTimeUtil2;
    private javax.swing.JLabel lblErrorEvent;
    private javax.swing.JLabel lblErrorLocation;
    private javax.swing.JLabel lblErrorTicket;
    private javax.swing.JLabel lblEventLocation;
    private javax.swing.JLabel lblEventsUtil;
    private javax.swing.JLabel lblLocations;
    private javax.swing.JLabel lblMap;
    private javax.swing.JLabel lblTicketsUtil;
    private javax.swing.JLabel lblTitle5;
    private javax.swing.JLabel lblTitle6;
    private javax.swing.JLabel lblTitle7;
    private javax.swing.JList<Event> lstEvents;
    private javax.swing.JList<Location> lstLocations;
    private javax.swing.JList<Ticket> lstTickets;
    private javax.swing.JPanel pnlDateTimeUtil;
    private javax.swing.JPanel pnlDateTimeUtilTitle;
    private javax.swing.JPanel pnlEventsUtilMain;
    private javax.swing.JPanel pnlEventsUtilTitle;
    private javax.swing.JPanel pnlLocationsUtilMain;
    private javax.swing.JPanel pnlLocationsUtilTitle;
    private javax.swing.JPanel pnlTicketsUtilMain;
    private javax.swing.JPanel pnlTicketsUtilTitle;
    private javax.swing.JTextField txtEventName;
    private javax.swing.JTextField txtFindEvent;
    private javax.swing.JTextField txtFindLocation;
    private javax.swing.JTextField txtTicketName;
    private javax.swing.JTextField txtTicketPrice;
    private javax.swing.JTextField txtTicketQuantity;
    // End of variables declaration//GEN-END:variables

    
    private void initDateComponents() {

        startDatePicker = new DatePicker();
        startDatePicker.setLocale(new Locale("hr"));
        startDatePicker.setDateToToday();
        startDatePicker.getSettings().setDateRangeLimits(LocalDate.now(), LocalDate.MAX);
        endDatePicker = new DatePicker();
        endDatePicker.setLocale(new Locale("hr"));
        endDatePicker.getSettings().setDateRangeLimits(LocalDate.now(), LocalDate.MAX);
        pnlDateTimeUtil.add(startDatePicker, new AbsoluteConstraints(10, 30));
        pnlDateTimeUtil.add(endDatePicker, new AbsoluteConstraints(10, 100));
        sdf = new SimpleDateFormat("MM.dd.yyyy");
    }
}
